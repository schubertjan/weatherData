y1 = yDat$Max10.Temperature, length=0.05, angle=90, code=3)
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Max10.Temperature = quantile(Max.Temperature, probs = 0.9),
Avg.Temperature = mean(Max.Temperature),
Min10.Temperature = min(Min.Temperature, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
plot(1:9, yDat$Avg.Temperature,
ylim=range(c(yDat$Min10.Temperature, yDat$Max10.Temperature)),
pch=19,
ylab = "Temperature (C)",
xlab = NA,
xaxt = "n",
main = "Average, Min And Max Temperature")
axis(1,at=1:9,labels = yDat$Year)
# horizontal error bars
arrows(x0 = 1:9,
y0 = yDat$Min10.Temperature,
x1 = 1:9,
y1 = yDat$Max10.Temperature, length=0.05, angle=90, code=3)
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Max10.Temperature = quantile(Max.Temperature, probs = 0.9),
Avg.Temperature = median(Max.Temperature),
Min10.Temperature = min(Min.Temperature, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
plot(1:9, yDat$Avg.Temperature,
ylim=range(c(yDat$Min10.Temperature, yDat$Max10.Temperature)),
pch=19,
ylab = "Temperature (C)",
xlab = NA,
xaxt = "n",
main = "Median, Lowest and Highest 10% Temperature")
axis(1,at=1:9,labels = yDat$Year)
# horizontal error bars
arrows(x0 = 1:9,
y0 = yDat$Min10.Temperature,
x1 = 1:9,
y1 = yDat$Max10.Temperature, length=0.05, angle=90, code=3)
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Max10.Precipitation = quantile(Precipitation, probs = 0.9),
Avg.Precipitation = median(Precipitation),
Min10.Precipitation = min(Precipitation, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
plot(1:9, yDat$Avg.Precipitation,
ylim=range(c(yDat$Min10.Precipitation, yDat$Max10.Precipitation)),
pch=19,
ylab = "Precipitation (mm)",
xlab = NA,
xaxt = "n",
main = "Median, Lowest and Highest 10% Precipitation")
axis(1,at=1:9,labels = yDat$Year)
# horizontal error bars
arrows(x0 = 1:9,
y0 = yDat$Min10.Precipitation,
x1 = 1:9,
y1 = yDat$Max10.Precipitation, length=0.05, angle=90, code=3)
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Max10.Precipitation = quantile(Precipitation, probs = 0.9),
Avg.Precipitation = median(Precipitation),
Min10.Precipitation = min(Precipitation, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
plot(1:9, yDat$Avg.Precipitation,
ylim=range(c(yDat$Min10.Precipitation, yDat$Max10.Precipitation)),
pch=19,
ylab = "Precipitation (mm)",
xlab = NA,
xaxt = "n",
main = "Median, Lowest and Highest 10% Precipitation",
type = "n")
axis(1,at=1:9,labels = yDat$Year)
# horizontal error bars
arrows(x0 = 1:9,
y0 = yDat$Min10.Precipitation,
x1 = 1:9,
y1 = yDat$Max10.Precipitation, length=0.05, angle=90, code=3)
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y") & precipitation > 0) %in% c("2009", "2019"),
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y") & Precipitation > 0) %in% c("2009", "2019"),
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019")  & Precipitation > 0,
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Max10.Precipitation = quantile(Max.Precipitation, probs = 0.9),
Avg.Precipitation = median(Max.Precipitation),
Min10.Precipitation = min(Min.Precipitation, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Up10.Temperature = quantile(Max.Temperature, probs = 0.9),
Avg.Temperature = median(Max.Temperature),
Low10.Temperature = min(Max.Temperature, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
plot(1:9, yDat$Avg.Temperature,
ylim=range(c(yDat$Low10.Temperature, yDat$Up10.Temperature)),
pch=19,
ylab = "Temperature (C)",
xlab = NA,
xaxt = "n",
main = "Median, Lowest and Highest 10% Temperature")
axis(1,at=1:9,labels = yDat$Year)
# horizontal error bars
arrows(x0 = 1:9,
y0 = yDat$Low10.Temperature,
x1 = 1:9,
y1 = yDat$Up10.Temperature, length=0.05, angle=90, code=3)
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019") & Precipitation > 0,
.(Max10.Precipitation = quantile(Precipitation, probs = 0.9),
Avg.Precipitation = median(Precipitation),
Min10.Precipitation = min(Precipitation, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
plot(1:9, yDat$Avg.Precipitation,
ylim=range(c(yDat$Min10.Precipitation, yDat$Max10.Precipitation)),
pch=19,
ylab = "Precipitation (C)",
xlab = NA,
xaxt = "n",
main = "Median, Lowest and Highest 10% Precipitation")
axis(1,at=1:9,labels = yDat$Year)
# horizontal error bars
arrows(x0 = 1:9,
y0 = yDat$Min10.Precipitation,
x1 = 1:9,
y1 = yDat$Max10.Precipitation, length=0.05, angle=90, code=3)
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019")  & Precipitation > 0,
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019")  & Precipitation > 0,
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[Precipitation > 0, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
table(weatherDat$Precip_above_longterm)
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019")  & Precipitation > 0,
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[Precipitation > 0, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
with(weatherDat, plot(Day, Max.Temperature, type = "l", xlab = NA, ylab = NA))
lines(loess.smooth(weatherDat$Day, weatherDat$Max.Temperature), col = "red")
lines(weatherDat$Day, weatherDat$Precipitation, col = "blue")
legend("bottomright",
legend = c("Max.Temperature", "Max.Temperature-trend","Precipitation"),
bg="transparent",
lty=c(1,1,1),
col = c("black", "red", "blue"))
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Max10.Temperature = quantile(Max.Temperature, probs = 0.9),
Avg.Temperature = median(Max.Temperature),
Min10.Temperature = min(Max.Temperature, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
plot(1:9, yDat$Avg.Temperature,
ylim=range(c(yDat$Min10.Temperature, yDat$Max10.Temperature)),
pch=19,
ylab = "Temperature (C)",
xlab = NA,
xaxt = "n",
main = "Median, Lowest and Highest 10% Temperature")
axis(1,at=1:9,labels = yDat$Year)
# horizontal error bars
arrows(x0 = 1:9,
y0 = yDat$Min10.Temperature,
x1 = 1:9,
y1 = yDat$Max10.Temperature, length=0.05, angle=90, code=3)
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019")  & Precipitation > 0,
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[Precipitation > 0, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
# url
seqDates <- seq.Date(from = as.Date("2018-03-01"),
to = Sys.Date(),
by = "day")
seqDates_url <- paste(format(seqDates, format = "%d"), format(seqDates, format = "%m"), format(seqDates, format = "%Y"), sep = "-")
weather_list <- lapply(seqDates_url, function(x) {
weatherUrl <- paste0("https://www.in-pocasi.cz/archiv/archiv.php?historie=",x,"&stanice_kraj=14&klima_kraj=14")
scrapeWeather(weatherUrl)
})
library(data.table)
library(rvest)
## SCRAPE
scrapeWeather <- function(weatherUrl) {
#Reading the HTML code from the website
webpage <- read_html(weatherUrl)
#Using CSS selectors to scrap the title section
weather_data_html <- html_nodes(webpage, '.prehled')
#Converting the title data to text
weather_data <-
html_table(weather_data_html, fill = TRUE, header = TRUE)
#format to a data.frame
weather_data <- as.data.frame(weather_data)
#loose the NA rows
weather_data <- weather_data[!is.na(weather_data$Stanice),]
return(weather_data)
}
# url
seqDates <- seq.Date(from = as.Date("2018-03-01"),
to = Sys.Date(),
by = "day")
seqDates_url <- paste(format(seqDates, format = "%d"), format(seqDates, format = "%m"), format(seqDates, format = "%Y"), sep = "-")
weather_list <- lapply(seqDates_url, function(x) {
weatherUrl <- paste0("https://www.in-pocasi.cz/archiv/archiv.php?historie=",x,"&stanice_kraj=14&klima_kraj=14")
scrapeWeather(weatherUrl)
})
names(weather_list) <- seqDates
weatherDat <- lapply(weather_list, function(x) {
x[x$Stanice == "Praha 9, Prosek", ]
})
weatherDat <- as.data.table(do.call(rbind, weatherDat),keep.rownames = TRUE)
names(weatherDat)[c(1,3:8)] <- c("Day", "Max.Temperature", "Min.Temperature", "Wind", "Precipitation", "Max.Pressure", "Max.Humidity")
selCol <- names(weatherDat)[3:8]
weatherDat[, selCol[1:2] := list(gsub(" °C","",Max.Temperature), gsub(" °C","",Min.Temperature))]
weatherDat[, selCol[3] := gsub(" km/h","",Wind)]
weatherDat[, selCol[4] := gsub(" mm","",Precipitation)]
weatherDat[, selCol[5] := gsub(" hPa","",Max.Pressure)]
weatherDat[, selCol[6] := gsub("%","",Max.Humidity)]
weatherDat[, c(selCol) := lapply(.SD, as.numeric), .SDcols = selCol]
#format date
weatherDat[, Day := as.Date(Day, format = "%Y-%m-%d")]
weather_list <- NULL
with(weatherDat, plot(Day, Max.Temperature, type = "l", xlab = NA, ylab = NA))
lines(loess.smooth(weatherDat$Day, weatherDat$Max.Temperature), col = "red")
lines(weatherDat$Day, weatherDat$Precipitation, col = "blue")
legend("bottomright",
legend = c("Max.Temperature", "Max.Temperature-trend","Precipitation"),
bg="transparent",
lty=c(1,1,1),
col = c("black", "red", "blue"))
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Max10.Temperature = quantile(Max.Temperature, probs = 0.9),
Avg.Temperature = median(Max.Temperature),
Min10.Temperature = min(Max.Temperature, probs = 0.1)),
by = .(Year = format(Day,format = "%Y"))]
plot(1:9, yDat$Avg.Temperature,
ylim=range(c(yDat$Min10.Temperature, yDat$Max10.Temperature)),
pch=19,
ylab = "Temperature (C)",
xlab = NA,
xaxt = "n",
main = "Median, Lowest and Highest 10% Temperature")
#precipitation a year
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation = sum(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
precip_long_term <- yDat[!Year %in% c("2009", "2019"), mean(Precipitation)]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Total Precipitation And Long Term Average",
ylab = "mm")
abline(a = precip_long_term, b = 0, col = "blue")
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019")  & Precipitation > 0,
.(Precipitation = mean(Precipitation)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation,
names.arg = yDat$Year,
main = "Average Daily Precipitation",
ylab = "mm")
weatherDat[Precipitation > 0, Precip_above_longterm := ifelse(Precipitation > mean(Precipitation), TRUE, FALSE)]
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
yDat
yDat <- weatherDat[!(format(Day,format = "%Y")) %in% c("2009", "2019"),
.(Precipitation_trend = sum(Precip_above_longterm, na.rm = TRUE)),
by = .(Year = format(Day,format = "%Y"))]
barplot(yDat$Precipitation_trend,
names.arg = yDat$Year,
main = "Number of Days with Precipitation Higher Than Long Term Average",
ylab = "Count")
